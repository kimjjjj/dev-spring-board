-- 게시판 테이블
CREATE TABLE BOARD (
    SEQ BIGINT GENERATED BY DEFAULT AS IDENTITY -- seq
  , BOARD_CODE VARCHAR2 -- 게시판 코드
  , CATEGORY_CODE INT -- 카테고리 코드
  , TXTNAME VARCHAR2 -- 글 제목
  , COMMENT VARCHAR2 -- 글 내용
  , TAG VARCHAR2 -- 태그
  , INSID VARCHAR2 -- 입력 유저 ID
  , INSDT TIMESTAMP -- 입력 일자
  , UPTID VARCHAR2 -- 수정 유저 ID
  , UPTDT TIMESTAMP -- 수정 일자
  , POINT INT DEFAULT 0 -- 좋아요 횟수
  , VIEW INT DEFAULT 0 -- 게시글 본 횟수
  , PRIMARY KEY (SEQ)
);

-- 첨부파일 테이블
CREATE TABLE ATTACH (
    SEQ BIGINT GENERATED BY DEFAULT AS IDENTITY -- seq
  , PARENT_SEQ INT -- board seq
  , FILENAME VARCHAR2 -- 파일 이름
  , SAVE_FILENAME VARCHAR2 -- 서버에 저장하는 파일 이름
  , PATH VARCHAR2 -- 저장 경로
  , INSID VARCHAR2 -- 입력 유저 ID
  , INSDT TIMESTAMP -- 입력 일자
  , UPTID VARCHAR2 -- 수정 유저 ID
  , UPTDT TIMESTAMP -- 수정 일자
  , PRIMARY KEY (SEQ)
  , FOREIGN KEY(PARENT_SEQ) REFERENCES BOARD(SEQ)
);

-- 회원정보 테이블
CREATE TABLE MEMBER_INFORMATION (
    ID VARCHAR2 PRIMARY KEY -- ID
  , PASSWORD VARCHAR2 -- 비밀번호
  , USER_NAME VARCHAR2 -- 이름
  , BIRTH INT -- 생년월일
  , PHONE_NUMBER VARCHAR2 -- 휴대폰 번호
  , NICKNAME VARCHAR2 -- 닉네임
  , INSDT TIMESTAMP -- 입력 일자
  , USER_POINT INT DEFAULT 0 -- 총 포인트
  , PROFILE_NAME VARCHAR2 -- 프로필 파일 이름
  , PROFILE_PATH VARCHAR2 -- 프로필 저장 경로
);

-- 좋아요 테이블
CREATE TABLE LIKE_TB (
    ID VARCHAR2 -- ID
  , PARENT_SEQ INT -- board seq
  , LIKE_TYPE VARCHAR2 -- 좋아요 타입
  , INSDT TIMESTAMP -- 입력 일자
  , PRIMARY KEY (ID, PARENT_SEQ, LIKE_TYPE)
);

-- 즐겨찾기 테이블
CREATE TABLE FAVORITE (
    ID VARCHAR2 -- ID
  , BOARD_CODE VARCHAR2 -- 게시판 코드
  , INSDT TIMESTAMP -- 입력일자
  , PRIMARY KEY (ID, BOARD_CODE)
  , FOREIGN KEY(ID) REFERENCES MEMBER_INFORMATION(ID)
);

-- 댓글 테이블
CREATE TABLE COMMENT (
    SEQ BIGINT GENERATED BY DEFAULT AS IDENTITY -- seq
  , ID VARCHAR2 -- 유저 ID
  , BOARD_SEQ INT -- board seq
  , CONTENT VARCHAR2 -- 글 내용
  , TOP_SEQ INT -- 최상위 댓글 seq
  , PARENT_SEQ INT -- 상위 댓글 seq
  , LVL INT -- level
  , ORDER_ROW INT -- 순서
  , POINT INT DEFAULT 0 -- 좋아요 횟수
  , INSDT TIMESTAMP -- 입력일자
  , UPTDT TIMESTAMP -- 수정일자
  , PRIMARY KEY (SEQ)
);