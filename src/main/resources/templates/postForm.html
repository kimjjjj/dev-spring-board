<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{common/layout/defaultLayout}">
<th:block layout:fragment="content">
    <main id="post-main">
        <div class="content-box">
            <div class="post-div">
                <section class="post-head">
                    <div class="post-txt-title bold">
                        <span class="txtCategory post-txtCategory"><a href="" th:text="${board.boardName}"></a></span>
                        <span th:text="'[' + ${board.categoryName} + ']'"></span>
                        <span th:text="${board.txtName}"></span>
                    </div>
                    <div class="nickname" th:style="${board.blockId eq null ? 'display:block' : 'display:none'}">
                        <img th:src="'/images/' + ${board.profileName}" class="board-profile comment-profile"
                             th:if="${board.profileName} ne null">
                        <span th:text="${board.nickName}"></span>
                        <ul>
                            <li><a href="userWriteForm.html" th:href="@{/userPage/{nickName}/post(nickName=${board.nickName})}">ê²Œì‹œê¸€ ë³´ê¸°</a></li>
                            <li><a href="userWriteForm.html" th:href="@{/userPage/{nickName}/comment(nickName=${board.nickName})}">ëŒ“ê¸€ ë³´ê¸°</a></li>
                        </ul>
                    </div>
                    <div class="nick-state" th:style="${board.blockId eq null ? 'display:block' : 'display:none'}">
                        <span class="dot">Â·</span>
                        <span th:text="${board.insDt}"></span>
                        <span class="dot">Â·</span>
                        <span><i class="fa-solid fa-eye post-icon"></i></span>
                        <span th:text="${board.view}"></span>
                        <span class="dot">Â·</span>
                        <span><i class="fa-regular fa-thumbs-up post-icon"></i></span>
                        <span th:text="${board.point}"></span>
                    </div>
                    <div class="board-state" th:if="${session.member ne null}">
                        <i class="fa-solid fa-ellipsis-vertical"></i>
                        <ul>
                            <li th:if="${member.userId} == ${board.insId} or ${member.userType} == 'admin'">
                                <form th:action="@{|/board/${board.titleCode}/${board.seq}/edit|}" method="get">
                                    <button>
                                        <i class="fa-regular fa-edit"></i>
                                        ìˆ˜ì •
                                    </button>
                                </form>
                            </li>
                            <li>
                                <form th:action="@{|/board/${board.titleCode}/${board.seq}/addBlock|}" method="post"
                                      th:if="${member.userId} != ${board.insId} and ${board.blockId eq null} and ${member.userType} != 'admin'">
                                    <input name="boardId" th:value="${board.insId}" type="text" style="display:none">
                                    <button>
                                        <i class="fa-solid fa-ban"></i>
                                        ì°¨ë‹¨
                                    </button>
                                </form>
                                <form th:action="@{|/board/${board.titleCode}/${board.seq}/cancelBlock|}" method="post"
                                      th:if="${board.blockId ne null}">
                                    <input name="blockId" th:value="${board.blockId}" type="text" style="display:none">
                                    <button>
                                        <i class="fa-solid fa-ban"></i>
                                        ì°¨ë‹¨í•´ì œ
                                    </button>
                                </form>
                                <form id="delete-board-form" th:action="@{|/board/${board.titleCode}/${board.seq}/delete|}" method="post"
                                      th:if="${member.userId} == ${board.insId} or ${member.userType} == 'admin'">
                                    <button onclick="fnBoardDelete()" type="button">
                                        <i class="fa-regular fa-trash-alt"></i>
                                        ì‚­ì œ
                                    </button>
                                </form>
                            </li>
                        </ul>
                    </div>
                </section>
                <div class="wide-hr">
                    <hr class="hr">
                </div>
                <section id="post-cont">
                    <script th:inline="javascript">
                        // ê²Œì‹œê¸€ ë‚´ìš©
                        const articleObject = [[${board.comment}]];
                        const arr = articleObject.split("<br />");

                        for (var i=0; i<arr.length; i++){

                            // ì´ë¯¸ì§€ í¬í•¨
                            if (arr[i].substr(0, 4) == "<img") {
                                var start = arr[i].indexOf("src")+5;
                                var end = arr[i].lastIndexOf(".")+4;
                                var files = "http://localhost:8080" + arr[i].substring(start, end);
                                const bgImage = document.createElement("img");
                                bgImage.src = files;
                                bgImage.className = "post-img";
                                document.getElementById("post-cont").appendChild(bgImage);

                                // ì´ë¯¸ì§€ ì´í›„ ì¤„ë°”ê¿ˆ ì—†ì´ ê¸€ì´ ìˆì„ ê²½ìš°
                                start = arr[i].lastIndexOf("/>") + 2;
                                end = arr[i].length;

                                const tagP = document.createElement('p');
                                tagP.innerHTML = arr[i].substr(start, end);
                                tagP.className = "post-img";
                                document.getElementById("post-cont").appendChild(tagP);
                            } else {
                                const tagP = document.createElement('p');
                                tagP.innerHTML = arr[i];
                                tagP.className = "post-img";
                                document.getElementById("post-cont").appendChild(tagP);
                            }
                        }
                    </script>
                    <div class="tag" th:text="'íƒœê·¸ : ' + ${board.tag}" th:if="${board.blockId eq null} and ${board.tag ne null} and ${board.tag ne ''}"></div>
                </section>
                <section>
<!--                    <div class="post-like" th:if="${board.blockId eq null}">-->
<!--                        <form class="aaa" id="post-form" action="/${board.seq}/like" th:action="@{|/${board.seq}/like|}" method="post">-->
<!--                            <input name="titleCode" th:value="${board.titleCode}" type="text" style="display:none">-->
<!--                            <button class="like" type="submit" th:if="${member.userId} != ${board.insId} and (${session.member eq null} or ${board.cnt eq 0})">-->
<!--                                ì¹¨í•˜í•˜<br>ğŸ˜‚-->
<!--                            </button>-->
<!--                        </form>-->
<!--                        <form class="aaa" action th:action>-->
<!--                            <button class="like" type="button" th:if="${member.userId} == ${board.insId}">-->
<!--                                ì¹¨í•˜í•˜ ë¶ˆê°€<br>ğŸ˜-->
<!--                            </button>-->
<!--                        </form>-->
<!--                        <form class="aaa" action="/${board.seq}/cancel" th:action="@{|/${board.seq}/cancel|}" method="post">-->
<!--                            <input name="titleCode" th:value="${board.titleCode}" type="text" style="display:none">-->
<!--                            <button class="like" type="submit" th:if="${member.userId} != ${board.insId} and ${session.member ne null} and ${board.cnt ne 0}">-->
<!--                                ì¹¨í•˜í•˜ ì·¨ì†Œ<br>ğŸ¤£-->
<!--                            </button>-->
<!--                        </form>-->

<!--                        <form class="aaa" action="/${board.seq}/scrapSave" th:action="@{|/${board.seq}/scrapSave|}" method="post">-->
<!--                            <input name="titleCode" th:value="${board.titleCode}" type="text" style="display:none">-->
<!--                            <button class="scrap" type="submit" th:if="${session.member eq null} or ${board.scrapCnt eq 0}">-->
<!--                                ìŠ¤í¬ë©<br>-->
<!--                                <i class="fa-regular fa-bookmark"></i>-->
<!--                            </button>-->
<!--                        </form>-->
<!--                        <form class="aaa" action="/${board.seq}/scrapCancel" th:action="@{|/${board.seq}/scrapCancel|}" method="post">-->
<!--                            <input name="titleCode" th:value="${board.titleCode}" type="text" style="display:none">-->
<!--                            <button class="scrap" type="submit" th:if="${session.member ne null} and ${board.scrapCnt ne 0}">-->
<!--                                ìŠ¤í¬ë© ì·¨ì†Œ<br>-->
<!--                                <i class="fa-solid fa-bookmark"></i>-->
<!--                            </button>-->
<!--                        </form>-->
<!--                    </div>-->
                    <div class="post-like" th:if="${board.blockId eq null}">
                        <form id="like-scrap-form" action th:action method="post">
                            <input name="titleCode" th:value="${board.titleCode}" type="text" style="display:none">
                            <div class="like-div">
                                <button class="like" type="submit" onclick="fnLike()"
                                        th:if="${member.userId} != ${board.insId} and (${session.member eq null} or ${board.cnt eq 0})">
                                    ì¹¨í•˜í•˜<br>ğŸ˜‚
                                </button>
                                <button class="like" type="button" th:if="${member.userId} == ${board.insId}">
                                    ì¹¨í•˜í•˜ ë¶ˆê°€<br>ğŸ˜
                                </button>
                                <button class="like" type="submit" onclick="fnCancel()"
                                        th:if="${member.userId} != ${board.insId} and ${session.member ne null} and ${board.cnt ne 0}">
                                    ì¹¨í•˜í•˜ ì·¨ì†Œ<br>ğŸ¤£
                                </button>
                            </div>
                            <div class="scrap-div">
                                <button type="submit" onclick="fnScrapSave()"
                                        th:if="${session.member eq null} or ${board.scrapCnt eq 0}">
                                    ìŠ¤í¬ë©<br>
                                    <i class="fa-regular fa-bookmark"></i>
                                </button>
                                <button type="submit" onclick="fnScrapCancel()"
                                        th:if="${session.member ne null} and ${board.scrapCnt ne 0}">
                                    ìŠ¤í¬ë© ì·¨ì†Œ<br>
                                    <i class="fa-solid fa-bookmark"></i>
                                </button>
                            </div>
                        </form>
                        <script>
                            // ì¹¨í•˜í•˜
                            function fnLike() {
                                $('#like-scrap-form').attr('action', '/[[${board.seq}]]/like').submit();
                            }

                            // ì¹¨í•˜í•˜ ì·¨ì†Œ
                            function fnCancel() {
                                $('#like-scrap-form').attr('action', '/[[${board.seq}]]/cancel').submit();
                            }

                            // ìŠ¤í¬ë©
                            function fnScrapSave() {
                                $('#like-scrap-form').attr('action', '/[[${board.seq}]]/scrapSave').submit();
                            }

                            // ìŠ¤í¬ë© ì·¨ì†Œ
                            function fnScrapCancel() {
                                $('#like-scrap-form').attr('action', '/[[${board.seq}]]/scrapCancel').submit();
                            }
                        </script>
                    </div>
                    <div class="post-list">
                        <div class="left"><button th:onclick="'location.href=\'' + @{${board.beforeSeq}} + '\''" type="button" th:if="${board.beforeSeq ne 0}">&lt;ì´ì „ ê¸€</button></div>
                        <div class="center"><a th:href="@{|/board/${board.titleCode}|}">ëª©ë¡</a></div>
                        <div class="right"><button th:onclick="'location.href=\'' + @{${board.afterSeq}} + '\''" type="button" th:if="${board.afterSeq ne 0}">ë‹¤ìŒ ê¸€&gt;</button></div>
                    </div>
                </section>

                <h2 class="h2">ëŒ“ê¸€</h2>
                <section th:each="comment : ${comments}">
                    <div class="comment-all-div">
                        <div class="comment-div">
                            <div class="comment-top" th:style="${comment.blockId eq null ? 'display:flex' : 'display:none'}">
                                <div class="comment-left">
                                    <div>
                                        <span>
                                            <img th:src="'/images/' + ${comment.profileName}" class="comment-profile"
                                                 th:if="${comment.profileName} ne null">
                                        </span>
                                    </div>
                                    <div class="comment-nick-div">
                                        <span class="bold" th:text="${comment.nickName}"></span>
                                        <span class="comment-nick" th:if="${board.insId} == ${comment.userId}">ê¸€ì“´ì´</span>
                                        <span class="comment-nick" th:if="${session.member ne null} and ${member.userId} == ${comment.userId}">ë‚˜</span>
                                        <span class="comment-indDt" th:text="${comment.insDt}"></span>
                                    </div>
                                </div>
                                <div class="comment-right" th:if="${session.member ne null}">
                                    <div>
                                        <button class="comment-re">ëŒ“ê¸€</button>
                                    </div>
                                    <form action="/${board.seq}/commentLike" th:action="@{|/${board.seq}/commentLike|}" method="post">
                                        <input name="commentSeq" th:value="${comment.seq}" type="text" style="display:none">
                                        <input name="titleCode" th:value="${board.titleCode}" type="text" style="display:none">
                                        <button class="comment-like" type="submit" th:if="${member.userId} != ${comment.userId} and ${comment.cnt eq 0}">ì¹¨í•˜í•˜ğŸ˜‚</button>
                                    </form>
                                    <form action th:action>
                                        <input name="commentSeq" th:value="${comment.seq}" type="text" style="display:none">
                                        <button class="comment-like" type="button" th:if="${member.userId} == ${comment.userId}">ì¹¨í•˜í•˜ ë¶ˆê°€ğŸ˜</button>
                                    </form>
                                    <form action="/${board.seq}/commentCancel" th:action="@{|/${board.seq}/commentCancel|}" method="post">
                                        <input name="commentSeq" th:value="${comment.seq}" type="text" style="display:none">
                                        <input name="titleCode" th:value="${board.titleCode}" type="text" style="display:none">
                                        <button class="comment-like" type="submit" th:if="${member.userId} != ${comment.userId} and ${comment.cnt ne 0}">ì¹¨í•˜í•˜ ì·¨ì†ŒğŸ¤£</button>
                                    </form>

                                    <div th:id="'comment' + ${comment.rownumb}" class="comment-state" th:if="${session.member ne null}" th:onclick="'fnComBox(' + ${comment.rownumb} + ')'">
                                        <i class="fa-solid fa-ellipsis-vertical"></i>
                                        <ul>
                                            <li th:if="${member.userId} == ${comment.userId} or ${member.userType} == 'admin'">
                                                <button class="comment-first-form">
                                                    <i class="fa-regular fa-edit"></i>
                                                    ìˆ˜ì •
                                                </button>
                                            </li>
                                            <li>
                                                <form th:id="'comment-second-form' + ${comment.rownumb}" th:if="${member.userId} != ${comment.userId} and ${member.userType} != 'admin'">
                                                    <button th:id="'delete-comment-btn' + ${comment.rownumb}">
                                                        <i class="fa-solid fa-ban"></i>
                                                        ì°¨ë‹¨
                                                    </button>
                                                </form>
                                                <form th:id="'comment-second-form' + ${comment.rownumb}"
                                                      th:action="@{|/board/${board.titleCode}/${board.seq}/${comment.seq}/delete|}" method="post"
                                                      th:if="${member.userId} == ${comment.userId} or ${member.userType} == 'admin'">
                                                    <button th:onclick="'fnCommentDelete(' + ${comment.rownumb} + ')'" type="button">
                                                        <i class="fa-regular fa-trash-alt"></i>
                                                        ì‚­ì œ
                                                    </button>
                                                </form>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <input class="comment-content" th:value="${comment.content}" type="text" readonly
                                   th:class="${comment.profileName} eq null ? 'comment-content comment-content-neimg' : 'comment-content comment-content-img'"
                                   th:if="${comment.blockId eq null}">
                            <input class="comment-content" th:value="${comment.content}" type="text" readonly
                                   th:if="${comment.blockId ne null}">
                            <form class="comment-input-form-re" action="/board/${board.titleCode}/${board.seq}/childComment"
                                  th:action="@{|/board/${board.titleCode}/${board.seq}/childComment|}" method="post">
                                <input name="rownumb" th:value="${comment.rownumb}" type="text" style="display:none">
                                <input name="topSeq" th:value="${comment.topSeq}" type="text" style="display:none">
                                <input name="parentSeq" th:value="${comment.parentSeq}" type="text" style="display:none">
                                <input name="seq" th:value="${comment.seq}" type="text" style="display:none">
                                <input name="orderRow" th:value="${comment.orderRow}" type="text" style="display:none">
                                <input name="lvl" th:value="${comment.lvl}" type="text" style="display:none">
                                <input name="editType" th:value="${comment.editType}" type="text" style="display:none">

                                <div class="comment-textarea-div">
                                    <textarea class="comment-textarea" name="content" placeholder="ëŒ“ê¸€ì„ ì‘ì„±í•´ ì£¼ì„¸ìš”."></textarea>
                                </div>
                                <div class="comment-btn-div">
                                    <button class="comment-btn" type="submit">ë“± ë¡</button>
                                </div>
                            </form>
                        </div>
                        <hr class="hr">
                    </div>
                    <script th:inline="javascript">
                        // ëŒ€ëŒ“ê¸€ margin ì¶”ê°€
                        var lvl = [[${comment.lvl}]] - 1;
                        var cnt = [[${comment.rownumb}]] - 1; // class itemì„ ìœ„í•´ ìœ„ì—ì„œë¶€í„° ì¹´ìš´íŠ¸

                        var cls = document.getElementsByClassName('comment-all-div').item(cnt);

                        if ([[${comment.blockId}]] == null) {
                            cls.style.marginLeft = lvl * 20 + 'px';
                        }
                    </script>
                </section>

                <form class="comment-input-form" action="/board/${board.titleCode}/${board.seq}/parentComment"
                      th:action="@{|/board/${board.titleCode}/${board.seq}/parentComment|}" method="post">
                    <div class="comment-textarea-div">
                        <textarea class="comment-textarea" name="content" placeholder="ë¡œê·¸ì¸ í•´ì£¼ì„¸ìš”." disabled th:if="${session.member eq null}"></textarea>
                        <textarea class="comment-textarea" name="content" placeholder="ëŒ“ê¸€ì„ ì‘ì„±í•´ ì£¼ì„¸ìš”." th:if="${session.member ne null}"></textarea>
                    </div>
                    <div class="comment-btn-div">
                        <button class="comment-btn" type="submit" disabled th:if="${session.member eq null}">ë“± ë¡</button>
                        <button class="comment-btn" type="submit" th:if="${session.member ne null}">ë“± ë¡</button>
                    </div>
                </form>
            </div>
        </div>
    </main>
</th:block>
</html>
<script>
    <!-- ê²Œì‹œê¸€ ì‹ ê³ /ìˆ˜ì •/ì°¨ë‹¨/ì‚­ì œ/ê³µìœ  ë°•ìŠ¤ë¥¼ ë¸Œë¼ìš°ì € í¬ê¸°ê°€ ë³€í•´ë„ ìœ ì§€ í•˜ë„ë¡ -->
    const mainRight = document.querySelector('.board-state>ul');
    fnBoardState();
    window.addEventListener('resize', () => {
        fnBoardState();
    });

    function fnBoardState() {
        const target = document.querySelector('.fa-ellipsis-vertical');
        const clientRect = target.getBoundingClientRect(); // DomRect êµ¬í•˜ê¸° (ê°ì¢… ì¢Œí‘œê°’ì´ ë“¤ì–´ìˆëŠ” ê°ì²´)
        const relativeLeft = clientRect.left; // Viewportì˜ ì‹œì‘ì§€ì ì„ ê¸°ì¤€ìœ¼ë¡œí•œ ìƒëŒ€ì¢Œí‘œ Y ê°’.
        mainRight.style.left = relativeLeft-90 + 'px';
    }
    <!------------------------------------------------------------------->

    <!-- ëŒ“ê¸€ ì‹ ê³ /ìˆ˜ì •/ì°¨ë‹¨/ì‚­ì œ/ê³µìœ  ë°•ìŠ¤ë¥¼ ë¸Œë¼ìš°ì € í¬ê¸°ê°€ ë³€í•´ë„ ìœ ì§€ í•˜ë„ë¡ -->
    fnCommentState();
    window.addEventListener('resize', () => {
        fnCommentState();
    });

    function fnCommentState() {
        for(var i=1; i<=document.getElementsByClassName('comment-state').length; i++) {
            var commentRight = document.querySelector('#comment' + i + '>ul');
            const target = document.querySelector('#comment' + i + '> .fa-ellipsis-vertical');
            const clientRect = target.getBoundingClientRect(); // DomRect êµ¬í•˜ê¸° (ê°ì¢… ì¢Œí‘œê°’ì´ ë“¤ì–´ìˆëŠ” ê°ì²´)
            const relativeLeft = clientRect.left; // Viewportì˜ ì‹œì‘ì§€ì ì„ ê¸°ì¤€ìœ¼ë¡œí•œ ìƒëŒ€ì¢Œí‘œ Y ê°’.
            commentRight.style.left = relativeLeft-90 + 'px';
        }
    }
    <!------------------------------------------------------------------>

    <!-- ë‹‰ë„¤ì„ í´ë¦­ ì‹œ ê²Œì‹œê¸€ë³´ê¸°/ëŒ“ê¸€ë³´ê¸° ë°•ìŠ¤ ë³´ì´ê¸° -->
    const nick = document.querySelector('.nickname');
    const dropdown = document.querySelector('.nickname>ul');
    var chkDisplay = dropdown.style.display;
    var chkNick = false;

    nick.addEventListener('click', clickNickEvent);
    function clickNickEvent(event) {
        chkNick = true;
        if (chkDisplay == '') {
            dropdown.style.display = 'block';
            dropdown.style.background = 'white';

        } else {
            dropdown.style.display = '';
        }

        // ëŒ“ê¸€ ìƒíƒœì°½ ëª¨ë‘ ë‹«ê¸°
        for(var i=1; i<=document.getElementsByClassName('comment-state').length; i++) {
            document.querySelector('#comment' + i + '>ul').style.display = '';
        }

        chkDisplay = dropdown.style.display;
    }
    <!--------------------------------------------->

    <!-- ë‹‰ë„¤ì„ì„ ì œì™¸í•œ ë‹¤ë¥¸ ê³³ í´ë¦­ ì‹œ ê²Œì‹œê¸€ë³´ê¸°/ëŒ“ê¸€ë³´ê¸° ë°•ìŠ¤ ë„ê¸° -->
    const body = document.querySelector("body");
    body.addEventListener('click', clickBodyEvent);
    function clickBodyEvent(event) {
        if (chkNick == false){
            if (chkDisplay == 'block') {
                dropdown.style.display = '';
            }

            chkDisplay = dropdown.style.display;
        }
        chkNick = false;
    }

    <!-- ê²Œì‹œê¸€ ... í´ë¦­ ì‹œ ì‹ ê³ /ìˆ˜ì •/ì°¨ë‹¨/ì‚­ì œ/ê³µìœ  ë°•ìŠ¤ ë³´ì´ê¸° -->
    const board = document.querySelector('.board-state');
    const banMenu = document.querySelector('.board-state>ul');
    menuDisplay = banMenu.style.display;
    var chkBoard = false;

    board.addEventListener('click', clickBoardEvent);
    function clickBoardEvent(event) {

        chkBoard = true;
        if (menuDisplay == '') {
            banMenu.style.display = 'block';
            banMenu.style.background = 'white';

        } else {
            banMenu.style.display = '';
        }

        // ëŒ“ê¸€ ìƒíƒœì°½ ëª¨ë‘ ë‹«ê¸°
        for(var i=1; i<=document.getElementsByClassName('comment-state').length; i++) {
            document.querySelector('#comment' + i + '>ul').style.display = '';
        }

        menuDisplay = banMenu.style.display;
    }
    <!------------------------------------------------------>

    <!-- ëŒ“ê¸€ ... í´ë¦­ ì‹œ ì‹ ê³ /ìˆ˜ì •/ì°¨ë‹¨/ì‚­ì œ/ê³µìœ  ë°•ìŠ¤ ë³´ì´ê¸° -->
    function fnComBox(num) {
        const commentMenu = document.querySelector('#comment' + num + '>ul');
        menuDisplay = commentMenu.style.display;
        chkBoard = true;

        if (menuDisplay == '') {
            commentMenu.style.display = 'block';
            commentMenu.style.background = 'white';
        } else {
            commentMenu.style.display = '';
        }

        // ëŒ“ê¸€ ìƒíƒœì°½ í˜„ì¬êº¼ ì œì™¸í•˜ê³  ë‹«ê¸°
        for(var i=1; i<=document.getElementsByClassName('comment-state').length; i++) {
            if (i != num) document.querySelector('#comment' + i + '>ul').style.display = '';
        }

        // ê²Œì‹œê¸€ ìƒíƒœì°½ ë‹«ê¸°
        document.querySelector('.board-state>ul').style.display = '';

        menuDisplay = commentMenu.style.display;
    }

    <!-- ...ì„ ì œì™¸í•œ ë‹¤ë¥¸ ê³³ í´ë¦­ ì‹œ ì‹ ê³ /ìˆ˜ì •/ì°¨ë‹¨/ì‚­ì œ/ê³µìœ  ë°•ìŠ¤ ë„ê¸° -->
    body2 = document.querySelector("body");
    body2.addEventListener('click', clickBody2Event);
    function clickBody2Event(event) {
        if (chkBoard == false){
            if (menuDisplay == 'block') {
                banMenu.style.display = '';

                // ëŒ“ê¸€ ìƒíƒœì°½ ëª¨ë‘ ë‹«ê¸°
                for(var i=1; i<=document.getElementsByClassName('comment-state').length; i++) {
                    document.querySelector('#comment' + i + '>ul').style.display = '';
                }
            }

            menuDisplay = banMenu.style.display;
        }

        chkBoard = false;
    }

    $(document).ready(function(){
        // ëŒ“ê¸€ í´ë¦­ ì‹œ ëŒ€ëŒ“ê¸€ ë°•ìŠ¤ ì—´ë¦¼
        $('.comment-re').each(function(i){
            $(this).click(function(e){
                var cls = document.getElementsByClassName('comment-input-form-re').item(i);
                var chkDisplay = cls.style.display;

                if (chkDisplay == '') {
                    cls.style.display = 'flex';
                } else {
                    cls.style.display = '';
                }
            });

            document.getElementsByName('editType').item(i).value = 'save';
        });

        $('.comment-first-form').each(function(i){
            // ëŒ“ê¸€ ìˆ˜ì • í´ë¦­ ì‹œ
            $(this).click(function(e){
                console.log(i);
                // ëŒ“ê¸€ ë°•ìŠ¤ ì—´ë¦¼
                var cls = document.getElementsByClassName('comment-input-form-re').item(i);
                var chkDisplay = cls.style.display;

                if (chkDisplay == '') {
                    cls.style.display = 'flex';
                } else {
                    cls.style.display = '';
                }

                // ëŒ“ê¸€ ë‚´ìš©ì´ ëŒ“ê¸€ ì…ë ¥ ë°•ìŠ¤ì— ë“¤ì–´ê°€ë„ë¡
                document.getElementsByClassName('comment-textarea').item(i).value =
                    document.getElementsByClassName('comment-content').item(i).value;

                document.getElementsByName('editType').item(i).value = 'update';
            });
        });
    });

    // ê²Œì‹œê¸€ ì‚­ì œ ì‹œ
    function fnBoardDelete() {
        if(confirm("ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
            document.getElementById('delete-board-form').submit();
        } else {
            return;
        }
    }

    // ëŒ“ê¸€ ì‚­ì œ
    function fnCommentDelete(num) {
        if(confirm("ëŒ“ê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
            document.getElementById('comment-second-form' + num).submit();
        } else {
            return;
        }
    }
</script>